"use strict";!function(e,s,a){function t(e){var a=s.createElement("div");a.className="csdn_mask"+e,s.body.appendChild(a)}function n(){t("6");var e=a("<div class='csdn_modal account_modal'><div class='top_content'>"+M+"<span class='tips fl'>此账号处于冻结状态</span><span class='close_modal fr'>×</span></div><a class='concat' href='https://csdn.s2.udesk.cn/im_client/?web_plugin_id=29181' target='_blank'>联系客服</a></div>");a(".csdn_mask6").append(e)}function o(){console.trace("taodawang assessAccount ===>",123),t("2");var e=a("<div class='csdn_modal assess_modal'><div class='top_content'>"+M+"<span class='tips fl'>此手机号已绑定CSDN帐号</span><span class='close_modal fr'>×</span></div><div class='bot_content'><div class='merge_btn fl'>合并账号</div><div class='change_phone fl'>更换手机号</div></div></div>");a(".csdn_mask2").append(e)}function c(s){t("4");var n=a("<div class='csdn_modal bind_modal'><div class='top_content'><span class='tips'>根据国家网信办规范，请您绑定手机号</span></div><p style='text-align: center;padding: 5px 0;'>若手机号已注册CSDN，会自动合并当前账号</p><div class='mid_cont'><div class='seas'>海外手机号</div><div class='changeBtn fl'>国内手机号</div></div><div class='bot_content'><div class='top_con'><ul  class='pull_list'>\n<li data-text='86' class='item china-code'><span data-text='86'>+ 86</span> <em data-text='86'>中国</em></li>\n <li data-text='1' class='item sea-code'><span data-text='1'>+ 1</span> <em data-text='1'>美国</em></li> \n<li data-text='1' class='item sea-code'><span data-text='1'>+ 1</span> <em data-text='1'>加拿大</em></li>\n <li data-text='852' class='item sea-code'><span data-text='852'>+ 852</span> <em data-text='852'>中国香港</em></li>\n <li data-text='886' class='item sea-code'><span data-text='886'>+ 886</span> <em data-text='886'>中国台湾</em></li>\n <li data-text='81' class='item sea-code'><span data-text='81'>+ 81</span> <em data-text='81'>日本</em></li>\n <li data-text='65' class='item sea-code'><span data-text='65'>+ 65</span> <em data-text='65'>新加坡</em></li>\n</ul><span class='area' id='area'>86</span><input type='text' placeholder='请输入手机号' class='phone_box fix_iponex' /></div><div class='bot'><input type='text' id='fix_iponex' placeholder='请输入语音验证码' class='msg_box msg_box1 fix_iponex' maxLength='6'/><span class='word word1 fix_iponex'>获取语音验证码</span></div><p class='letter letter1'>海外手机号</p><div class='bt_group '><div class='fr fix_iponex confirm'>绑定</div><div class='fr fix_iponex confirm1'>暂不绑定</div></div></div></div>");a(".csdn_mask4").append(n);var o=e.navigator.userAgent.toLowerCase(),c=e.navigator.userAgent.indexOf("CSDN"),i=!1;(/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(e.navigator.userAgent)||"micromessenger"===o.match(/MicroMessenger/i)||c>-1)&&(i=!0),a(".letter1").text()&&a(".letter1").text().indexOf("海外")>-1&&"4"!==s&&a(".sea-code").css("display","none"),"4"===s?(i||a(".changeBtn").css("display","block"),a(".seas").css("display","block"),a(".bind_modal").addClass("scan_modal1")):(a(".bind_modal").removeClass("scan_modal1"),a(".changeBtn").css("display","none"),a(".seas").css("display","none"))}function i(){t("6");var e=a("<div class='csdn_modal bind_modal bind_modal1'><div class='top_content'><span class='tips fl'></span><span class='close_modal fr'>×</span></div><div class='bot_content'><div class='bot'><input type='text' placeholder='请输入语音验证码' class='msg_box msg_box1' maxLength='6'/><span class='word word1'>获取语音验证码</span></div><div class='bt_group confirm'>确定</div></div></div>");a(".csdn_mask6").append(e);var s="账号异常，请通过"+L.userMobile+"获取验证码校验";a(".tips").text(s)}function r(){t("6");var e=a("<div class='csdn_modal bind_modal bind_modal1'><div class='top_content'><span class='tips fl'></span><span class='close_modal fr'>×</span></div><div class='bot_content'><div class='bot'><input type='text' placeholder='请输入短信验证码' class='msg_box msg_box1' maxLength='6'/><span class='word word1'>获取短信验证码</span></div><div class='bt_group confirm'>确定</div></div></div>");a(".csdn_mask6").append(e);var s="账号异常，请通过"+L.userMobile+"获取验证码校验";a(".tips").text(s)}function d(){t("5");var e=a("<div class='csdn_modal scan_modal'><div class='top_content'><span class='tips'>根据国家网信办规范，请您绑定手机号</span></div><div class='mid_con'><span class='cur_word fl'>大陆手机号</span><span class='cur_word1 fr'>海外手机号</span></div><div class='message'>1.请扫码关注下方任意公众号，发送手机号给该公众号，获取短信验证码</div><div class='pic_box'><img class='code_pic' src=''/><p class='title'>CSDN公众号</p></div><div class='message message1'>2.请填写短信验证码 （若手机号已注册CSDN，会自动合并当前账号）</div><input type='text' placeholder='请输入短信验证码' class='msg_box' maxLength='6'/><div class='process-text'><label><input disabled='disabled' type='checkbox' checked='checked'></label>\n                    我已仔细阅读并接受  <a href='https://passport.csdn.net/service' target='_blank'><em>CSDN用户服务条款</em></a></div><div class='bot_btn'>下一步</div></div>");a(".csdn_mask5").append(e),a(".code_pic").attr("src",L.qrUrl)}function l(e){var t=s.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://g.csdnimg.cn/user-login/"+e+"/js/??toast.script.js";var n=s.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),a("<link/>",{rel:"stylesheet",type:"text/css",href:"https://g.csdnimg.cn/user-login/"+e+"/css/??index.css,toast.style.css"}).appendTo("head")}function p(s){L.canClick&&(L.canClick=!1,a(".word").text(L.downTime+"s"),L.timer=e.setInterval(function(){if(L.downTime--,a(".word").text(L.downTime+"s"),L.downTime<=0){e.clearInterval(L.timer),L.timer=null;var t=s>-1?"获取短信验证码":"获取语音验证码";a(".word").text(t),L.downTime=60,L.canClick=!0}},1e3))}function m(){e.clearInterval(L.timer),L.timer=null,(a(".msg_box1").attr("placeholder")&&a(".msg_box1").attr("placeholder").indexOf("短信")||0)>-1?a(".word").text("获取短信验证码"):a(".word").text("获取语音验证码"),L.downTime=60,L.canClick=!0}function v(s,a){var t=e.navigator.userAgent.toLowerCase(),n=e.navigator.userAgent.indexOf("CSDN"),o="toast-top-center";(/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(e.navigator.userAgent)||"micromessenger"===t.match(/MicroMessenger/i)||n>-1)&&(o="toast-top-right"),e.csdn.userLogin.Toast("提示",s,a,{stack:!0,has_icon:!1,has_close_btn:!0,fullscreen:!1,timeout:3e3,sticky:!1,rtl:!1,position_class:o})}function u(){try{L.phoneNumber=a(".phone_box")&&a(".phone_box").val().replace(/(^\s*)|(\s*$)/g,"")||""}catch(e){L.phoneNumber=""}var e=/^[1][3,4,5,6,7,8,9][0-9]{9}$/,s=/^((\d{10})|(0?(7|8|9)0\d{8})|([569]\d{7})|((09|9)\d{8})|([89]\d{7})|([1][3,4,5,6,7,8,9][0-9]{9}))$/;return L.phoneNumber?(L.curCode=a(".area").text()||"","86"!==L.curCode&&"1"!==L.curCode||(!!("86"===L.curCode?e:s).test(L.phoneNumber)||(v("请输入正确的手机号码","error"),!1))):(v("手机号不能为空","error"),!1)}function _(e){try{L.veriCode=e?a(".msg_box1").val().replace(/(^\s*)|(\s*$)/g,""):a(".msg_box").val().replace(/(^\s*)|(\s*$)/g,"")}catch(e){L.veriCode=""}var s=/^\d{6}$/;return L.veriCode?!!s.test(L.veriCode)||(v("请输入6位数字验证码","error"),!1):(v("验证码不能为空","error"),!1)}function f(s,t,n,o){var c=s&&s.indexOf("chooseOfficeAccount")>-1?"https://passport.csdn.net/v1/register/":"https://passport.csdn.net/v1/api/";a.ajax({url:c+s,type:t,dataType:"json",contentType:"application/json",async:!1,xhrFields:{withCredentials:!0},data:o?JSON.stringify(o):"",success:function(e){console.log("---------success",e),n(e)},error:function(s){if(console.log("---------error",s),m(),s&&s.responseText){var a=JSON.parse(s.responseText);a.message=a.message||"接口异常",v(a.message,"error"),a.code&&"1021"===a.code&&(e.location.href="https://passport.csdn.net/account/login"),n(a)}else n({})}})}function b(){f("riskControl/sendVerifyCode","POST",function(s){s.code&&"1021"===s.code&&(e.location.href="https://passport.csdn.net/account/login")})}function g(){f("riskControl/sendVoiceVerifyCode","POST",function(s){s.code&&"1021"===s.code&&(e.location.href="https://passport.csdn.net/account/login")})}function k(){var e={verifyCode:L.veriCode||""};f("riskControl/checkVerifyCode","POST",function(e){e.status&&404!==e.status&&(a(".csdn_mask4").remove(),a(".csdn_mask5").remove(),a(".csdn_mask6").remove(),m(),L.callback&&L.callback(e),L.callback||(V.result=e))},e)}function x(){var e={verifyCode:L.veriCode||""};f("riskControl/checkVoiceVerifyCode","POST",function(e){e.status&&404!==e.status&&(a(".csdn_mask4").remove(),a(".csdn_mask5").remove(),a(".csdn_mask6").remove(),L.callback&&L.callback(e),L.callback||(V.result=e),m())},e)}function h(){var e={mobile:L.phoneNumber||"",code:L.curCode?"00"+L.curCode:""};f("riskControl/sendBindVerifyCode","POST",function(e){},e)}function C(){var s={mobile:L.phoneNumber||"",code:L.curCode?"00"+L.curCode:"",verifyCode:L.veriCode||""};f("riskControl/checkBindVerifyCode","POST",function(s){s.status&&404!==s.status?(L.callback&&L.callback(s),L.callback||(V.result=s),a(".csdn_mask4").remove(),a(".csdn_mask5").remove(),a(".csdn_mask6").remove(),m()):s.code&&"1028"===s.code&&(s.isNew?e.location.reload():o())},s)}function y(){var e={mobile:L.phoneNumber||""};f("riskControl/sendBindVoiceCode","POST",function(e){},e)}function w(){var s={mobile:L.phoneNumber||"",code:L.curCode?"00"+L.curCode:"",verifyCode:L.veriCode||"",uaToken:"",webUmidToken:"",deviceToken:""};f("riskControl/checkVoiceCodeAndBind","POST",function(s){s.status&&404!==s.status?(L.callback&&L.callback(s),L.callback||(V.result=s),a(".csdn_mask4").remove(),a(".csdn_mask5").remove(),a(".csdn_mask6").remove(),m()):s.code&&"1028"===s.code&&(s.isNew?e.location.reload():o())},s)}function N(){var s={mobile:L.phoneNumber||"",code:L.curCode?"00"+L.curCode:"",verifyCode:L.veriCode||""};f("riskControl/weixin/checkCodeAndBind","POST",function(s){s.status&&404!==s.status?(L.callback&&L.callback(s),L.callback||(V.result=s),a(".csdn_mask4").remove(),a(".csdn_mask5").remove(),a(".csdn_mask6").remove(),m()):s.code&&"1028"===s.code&&(s.isNew?e.location.reload():o())},s)}function O(){var e=a(".msg_box").val()||"";L.veriCode=e;var s=/^\d{6}$/;return!(!e||!s.test(e))||(v("请输入6位验证码","error"),!1)}function T(e){f("chooseOfficeAccount?num=1","GET",function(s){if(s&&s.status){var a=s.data&&s.data.items.length&&s.data.items[0].officialAccountsImgUrl||"https://csdnimg.cn/release/passport/history/images/jingpinke.jpg";L.qrUrl=a}else L.qrUrl="https://csdnimg.cn/release/passport/history/images/jingpinke.jpg";e&&e(L)})}function S(s){if(s)c();else{var t=e.navigator.userAgent.toLowerCase(),n=e.navigator.userAgent.indexOf("CSDN");/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(e.navigator.userAgent)||"micromessenger"===t.match(/MicroMessenger/i)||n>-1?(a(".fix_iponex").blur(function(){e.scrollTo(0,0)}),c("4"),a(".letter1").css("display","none"),a(".msg_box1").attr("placeholder","请输入短信验证码"),a(".word1").text("获取短信验证码"),a(".seas").css("display","none")):d()}}function A(){var e={code:"0086",unionid:"",openid:"o9Y-ajsgTwv2MvFz9qNdnKYt1-HE",appid:"gh_d45429d1a396",mobile:a(".mock_phone").val()||"15321575546"};f("internal/weixin/sendVerifyCode","POST",function(e){e.status&&v(e.msg,"success")},e)}function P(){f("riskControl/getUserMobile","POST",function(e){e.status&&(e.data.mobile&&(L.userMobile=e.data.mobile),e.data.code&&(L.userCode=e.data.code),L.userCode?"0086"===L.userCode?i():r():i())})}function B(){var s={username:D("UserName")||""};f("check/userstatus","POST",function(s){if(s.status)if(s.detail)switch(s.detail){case"deleted":n();break;case"riskControl":P();break;case"activateAndRisk":S(1),L.isFeed=1;break;case"activate":T(function(){S(0),L.isFeed=0});break;default:return L.callback||(V.result=s),!0}else L.callback&&L.callback(s),L.callback||(V.result=s);else e.location.href="https://passport.csdn.net/account/login"},s)}var M='<svg class="icon_user_login icon warn_icon fl" viewBox="0 0 1024 1024"><path d="M512.874667 938.474667c-235.434667 0-426.261333-190.848-426.261334-426.261334 0-235.434667 190.848-426.261333 426.261334-426.261333s426.261333 190.848 426.261333 426.261333c-0.021333 235.413333-190.848 426.261333-426.261333 426.261334z m0-85.248c188.352 0 341.013333-152.682667 341.013333-341.013334 0-188.352-152.661333-341.013333-341.013333-341.013333S171.861333 323.861333 171.861333 512.213333c0 188.330667 152.661333 341.013333 341.013334 341.013334z m-42.645334-511.530667a42.624 42.624 0 1 1 85.290667 0v204.586667a42.666667 42.666667 0 0 1-85.290667 0v-204.586667zM512.874667 725.333333a42.666667 42.666667 0 1 1 0.042666-85.290666A42.666667 42.666667 0 0 1 512.874667 725.333333z" fill=""></path></svg>',L={timer:"",downTime:60,canClick:!0,phoneNumber:"",curCode:"86",veriCode:"",callback:function(){},isFeed:0,qrUrl:"https://csdnimg.cn/release/passport/history/images/csdnnews.jpg",userMobile:"",userCode:"",version:"2.3.1"},j={init:function(){l(L.version),a(s).on("click",".test_send",function(){A()}),a(s).on("blur",".fix_iponex",function(){var s=e.navigator.userAgent.toLowerCase(),a=e.navigator.userAgent.indexOf("CSDN");(/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(e.navigator.userAgent)||"micromessenger"===s.match(/MicroMessenger/i)||a>-1)&&e.scrollTo(0,0)}),a(s).on("click",".close_modal, .confirm1",function(){a(this).parent().parent().parent().remove(),a(".csdn_mask5")&&a(".csdn_mask5").remove(),a(".csdn_mask3")&&a(".csdn_mask3").remove(),a(".csdn_mask4")&&a(".csdn_mask4").remove()}),a(s).on("click",".merge_btn",function(){a(".csdn_mask5")&&a(".csdn_mask5").remove(),a(".csdn_mask2")&&a(".csdn_mask2").remove(),a(".csdn_mask3")&&a(".csdn_mask3").remove(),a(".csdn_mask4")&&a(".csdn_mask4").remove(),a(".csdn_mask6")&&a(".csdn_mask6").remove(),e.open("https://i.csdn.net/#/account/merge?isKey=1")}),a(s).on("click","body",function(e){"area"===e.target.id?"block"===a(".pull_list").css("display")?a(".pull_list").css("display","none"):a(".pull_list").css("display","block"):a(".pull_list").css("display","none")}),a(s).on("click",".letter",function(){var e=a(this).text();m(),"海外手机号"===e?(a(".china-code").css("display","none"),a(".sea-code").css("display","block"),a(this).text("国内手机号"),a(".msg_box1").attr("placeholder","请输入短信验证码"),a(".word1").text("获取短信验证码"),a(".phone_box").val(""),a(".msg_box").val(""),a("#area").text("1")):(a(".china-code").css("display","block"),a(".sea-code").css("display","none"),a(this).text("海外手机号"),a(".phone_box").val(""),a(".msg_box").val(""),a("#area").text("86"),a(".msg_box1").attr("placeholder","请输入语音验证码"),a(".word1").text("获取语音验证码"))}),a(s).on("click",".pull_list",function(e){if("em"===e.target.tagName.toLowerCase()||"li"===e.target.tagName.toLowerCase()||"span"===e.target.tagName.toLowerCase()){var s=e.target.dataset.text||"";a(".area").text(s)}}),a(s).on("click",".word",function(e){var s=a(".msg_box1").attr("placeholder").indexOf("短信"),t=a(".tips").text().indexOf("校验");t>-1?(p(s),s>-1?t>-1?b():h():t>-1?g():y()):u()&&(p(s),s>-1?t>-1?b():h():t>-1?g():y())}),a(s).on("click",".confirm",function(e){var s=a(".msg_box1").attr("placeholder").indexOf("短信"),t=a(".tips").text().indexOf("校验");t>-1?_(1)&&(s>-1?t>-1?k():C():t>-1?x():w()):u()&&_(1)&&(s>-1?t>-1?k():C():t>-1?x():w())}),a(s).on("click",".confirmBind",function(e){u()&&_()&&w()}),a(s).on("click",".cur_word1",function(e){c("4"),a(".csdn_mask5")&&a(".csdn_mask5").remove(),a(".letter1").css("display","none"),a(".china-code").css("display","none"),a(".area").text("1"),a(".msg_box1").attr("placeholder","请输入短信验证码"),a(".word1").text("获取短信验证码")}),a(s).on("click",".bot_btn",function(e){O()&&N()}),a(s).on("click",".to_bind",function(s){if(a(".csdn_mask0").remove(),L.isFeed)c();else{var t=e.navigator.userAgent.toLowerCase(),n=e.navigator.userAgent.indexOf("CSDN");/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(e.navigator.userAgent)||"micromessenger"===t.match(/MicroMessenger/i)||n>-1?(c("4"),a(".letter1").css("display","none"),a(".msg_box1").attr("placeholder","请输入短信验证码"),a(".word1").text("获取短信验证码")):d()}}),a(s).on("click",".change_phone",function(e){a(".csdn_mask2").remove(),a(".msg_box")&&a(".msg_box").val(""),a(".mock_phone")&&a(".mock_phone").val("")}),a(s).on("click",".changeBtn",function(e){L.curCode="86",T(function(){a(".csdn_mask4").remove(),S(0),L.isFeed=0})})}},V={loadAjax:function(e){L.callback=e||"",B()},result:{}},D=function(e){var a,t=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(a=s.cookie.match(t))?unescape(a[2]):""};if(void 0===e.csdn&&(e.csdn={}),csdn.userLogin)return void console.warn("user-login组件重复，请检查！");j.init(),e.csdn.userLogin=V}(window,document,jQuery);